<!DOCTYPE html>
<html lang="en">
<%- include("./partials/head.ejs", {title: "Register" }); %>

    <body>
        <%- include("./partials/nav_bar.ejs"); %>
            <div class="d-flex justify-content-center align-items-center mt-5" style="min-height: 60vh ;">
                <div class="card p-4 mb-3"
                    style="width: 450px; border-radius: 50px; background-color: #d9d9d9; border: none; position: relative;">
                    <div class="card-body">
                        <h3 class="text-center mb-4">Sign up</h3>
                        <form method="POST" enctype="multipart/form-data">
                            <% if (error) {%>
                                <div class="text-danger mb-3" style="font-size: 16px;">
                                    <i class="bi bi-exclamation-circle me-1"></i><%= error %>
                                </div>
                            <% } %>
                            <!-- Role selection -->
                            <p class="fw-bold">Role</p>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="role" id="donorRole"
                                        value="donor" onclick="toggleRole(false)" required>
                                    <label class="form-check-label" for="donorRole">Donor</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="role" id="creatorRole"
                                        value="campaign_creator" onclick="toggleRole(true)">
                                    <label class="form-check-label" for="creatorRole">Campaign creator</label>
                                </div>
                            </div>
                            <!-- Username -->
                            <div class="mb-3">
                                <label for="username" class="form-label">Username</label>
                                <input type="text" name="username" id="username" class="form-control"
                                    style="border-radius: 50px;" placeholder="Enter your username" required>
                            </div>
                            <!-- Password -->
                            <div class="mb-3">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" name="password" id="password" class="form-control"
                                    style="border-radius: 50px;" placeholder="Enter your password" required>
                            </div>
                            <!-- Confirm password -->
                            <div class="">
                                <label for="password_confirmation" class="form-label">Confirm password</label>
                                <input type="password" name="password_confirmation" id="password_confirmation"
                                    class="form-control" style="border-radius: 50px;"
                                    placeholder="Confirm your password" required>
                            </div>
                            <!-- Additional fields for Campaign Creator -->
                            <div class="mt-3" id="additionalFields"
                                style="visibility: hidden; height: 0; overflow: hidden; transition: all 0.3s ease;">
                                <p class="fw-bold">Documents</p>
                                <div class="mb-3">
                                    <label for="id_document" class="form-label">Identification document in PDF format
                                        *</label>
                                    <input type="file" name="id_document" id="id_document" class="form-control" accept="application/pdf"
                                        style="border-radius: 50px;">
                                </div>
                            </div>
                            <!-- Sign up button -->
                            <div class="text-center mt-4">
                                <button type="submit" class="btn"
                                    style="width: 131px; padding: 6px 12px; border-radius: 50px; background-color: #3d704d; color: white; border: none; transition: background-color 0.3s ease;"
                                    onmouseover="this.style.backgroundColor='#2e5239';"
                                    onmouseout="this.style.backgroundColor='#3d704d';">Sign
                                    up</button>
                            </div>
                        </form>
                        <!-- Already have an account -->
                        <div class="text-center mt-3">
                            <p class="mb-0">Already have an account?
                                <a href="/login" class="fw-bold" style="color: #3d704d;">Sign in</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <script>
                function toggleRole(isCreator) {
                    const additionalFields = document.getElementById('additionalFields');
                    if (isCreator) {
                        additionalFields.style.visibility = 'visible';
                        additionalFields.style.height = 'auto';
                        additionalFields.style.overflow = 'visible';
                    } else {
                        additionalFields.style.visibility = 'hidden';
                        additionalFields.style.height = '0';
                        additionalFields.style.overflow = 'hidden';
                    }
                }
                // Check the selected role on page load
                document.addEventListener('DOMContentLoaded', () => {
                    const creatorRole = document.getElementById('creatorRole');
                    if (creatorRole.checked) {
                        toggleRole(true);
                    }
                });
            </script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
                crossorigin="anonymous"></script>
            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </body>

</html>
